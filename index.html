<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The CODE</title>

<!-- FONTS -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!-- Primary (buttons / body / inputs) -->
<link href="https://fonts.googleapis.com/css2?family=Bitcount+Prop+Single:wght@100..900&display=swap" rel="stylesheet">
<!-- Title font (changeable) -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&display=swap" rel="stylesheet">

<style>
/* ===========================================================
   üîπ N·ªòI DUNG G·ªêC ‚Äî KH√îNG THAY ƒê·ªîI B·∫§T K·ª≤ D√íNG N√ÄO
   =========================================================== */
body {
    margin:0;
    padding:0;
    font-family:"Bitcount Prop Single", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:url('images/bg_home.jpg') center/cover no-repeat fixed;
    height:100vh;
    overflow:hidden;
    color:black;
    text-align:center;
    position:relative;
}
#home {
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    text-align:center;
    opacity:0;
    animation: fadeIn 1.2s ease forwards;
}
.title-main {
    font-family: "Montserrat";
    font-weight:900;
    letter-spacing:2px;
    font-size:5rem;
    margin:0 0 6px 0;
    text-transform:uppercase;
}
.typewriter {
    display:inline-block;
    overflow:hidden;
    white-space:nowrap;
    border-right:2px solid rgba(255,255,255,0.6);
    animation:
        typing 2.6s steps(40) forwards,
        blink .7s step-end infinite;
    font-size:20px;
    margin-top:6px;
    font-family:"Bitcount Prop Single";
}
@keyframes typing { from { width:0 } to { width:320px } }
@keyframes blink { 50% { border-color:transparent; } }

#overlay {
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.4);
    backdrop-filter:blur(2px);
    z-index:10;
    opacity:0;
    pointer-events:none;
    transition:opacity .35s ease;
}
#overlay.active { opacity:1; pointer-events:auto; }

.page {
    display:none;
    position:fixed;
    top:50%; left:50%;
    transform:translate(-50%, -50%);
    width:80vw;
    max-width:520px;
    background:rgba(0,0,0,0.55);
    backdrop-filter:blur(8px);
    border-radius:12px;
    border:1px solid rgba(0,255,255,0.12);
    padding:34px;
    box-shadow:0 0 30px rgba(0,0,0,0.6);
    z-index:20;
    color:white;
    text-align:center;
    opacity:0;
    transform-origin:center;
    transition:opacity .34s ease, transform .34s ease;
}
.page.active {
    display:block !important;
    opacity:1;
    transform:translate(-50%, -50%) scale(1);
}

button, input, textarea {
    font-family:"Bitcount Prop Single";
}
button {
    padding:12px 20px;
    margin:10px;
    background:#000;
    border:1px solid #444;
    border-radius:6px;
    cursor:pointer;
    color:white;
    font-size:18px;
    min-width:180px;
    transition:all .22s ease;
    box-shadow:0 0 8px rgba(0,0,0,0.6), inset 0 0 6px rgba(255,255,255,0.03);
}
button:hover {
    background:#222;
    box-shadow:0 6px 18px rgba(0,0,0,0.6), 0 0 18px rgba(0,255,255,0.08);
}
input {
    padding:12px;
    background:#000;
    border:1px solid #555;
    color:white;
    width:240px;
    font-size:1.05em;
    margin-top:10px;
    border-radius:6px;
    box-shadow:inset 0 0 10px rgba(0,0,0,0.6);
}
@media (max-width:520px){
    .title-main { font-size:3rem; }
    .typewriter { width:220px; }
    .page { width:90vw; padding:24px; }
}

body::after {
    content:"";
    position:fixed;
    inset:0;
    pointer-events:none;
    background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.02) 0px,
        rgba(255,255,255,0.02) 1px,
        transparent 2px
    );
    z-index:5;
    mix-blend-mode:overlay;
}
@keyframes fadeIn {
    from { opacity:0; transform:translate(-50%, -55%); }
    to   { opacity:1; transform:translate(-50%, -50%); }
}
/* END OF ORIGINAL CODE ‚Äî DO NOT TOUCH */
/* =========================================================== */


/* ===========================================================
   üî• ADDED EFFECT 1 ‚Äî SYMBOL RAIN (Matrix)
   =========================================================== */
#symbolsCanvas {
    position:fixed;
    inset:0;
    z-index:-3; /* FIXED: put behind everything */
    pointer-events:none;
}

/* ===========================================================
   üî• ADDED EFFECT 2 ‚Äî GLOW PULSE CHO TITLE
   =========================================================== */
.title-main {
    animation: glowPulse 3s ease-in-out infinite;
}
@keyframes glowPulse {
    0%,100% { text-shadow:0 0 12px rgba(0,255,255,0.25); }
    50%     { text-shadow:0 0 26px rgba(0,255,255,0.65); }
}

/* ===========================================================
   üî• ADDED EFFECT 3 ‚Äî SCANLINE SWEEP
   =========================================================== */
#scanSweep {
    position:fixed;
    inset:0;
    background:linear-gradient(
        to bottom,
        transparent 0%,
        rgba(255,255,255,0.18) 50%,
        transparent 100%
    );
    mix-blend-mode:overlay;
    animation:sweep 4s linear infinite;
    z-index:-1; /* FIXED */
    pointer-events:none;
}
@keyframes sweep {
    0% { transform:translateY(-100%); }
    100% { transform:translateY(100%); }
}

/* ===========================================================
   üî• ADDED EFFECT 4 ‚Äî BUTTON HOVER DISTORTION
   =========================================================== */
button:hover {
    filter:url(#distortFilter);
}

/* SVG filter container */
svg {
    position:absolute;
    width:0;
    height:0;
}

/* ===========================================================
   üî• ADDED EFFECT 5 ‚Äî AMBIENT PARTICLES
   =========================================================== */
#ambientCanvas {
    position:fixed;
    inset:0;
    z-index:-2; /* FIXED */
    pointer-events:none;
</style>
</head>

<body>

<!-- ADDED CANVASES -->
<canvas id="symbolsCanvas"></canvas>
<canvas id="ambientCanvas"></canvas>
<div id="scanSweep"></div>

<!-- SVG FILTER (for button distortion) -->
<svg>
    <filter id="distortFilter">
        <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="3" result="noise"/>
        <feDisplacementMap in="SourceGraphic" in2="noise" scale="4"/>
    </filter>
</svg>

<!-- ORIGINAL HTML CONTENT ‚Äî NOT TOUCHED -->
<div id="home">
    <h1 class="title-main">THE CODE</h1>
    <p><span class="typewriter">Welcome back, Decoder.</span></p>
    <button onclick="playClick(); openPage('hub')">Enter Hub</button>
</div>

<div id="overlay" onclick="playClick(); closePage()"></div>

<div id="hub" class="page">
    <h2>Case Hub</h2>
    <button onclick="playClick(); openPage('case1')">Case 1</button><br>
    <button onclick="playClick(); openPage('case2')">Case 2</button><br>
    <button onclick="playClick(); openPage('case3')">Case 3</button><br>
    <button onclick="playClick(); closePage()">Close</button>
</div>

<div id="case1" class="page">
    <h2>Case 1</h2>
    <p>Cypher Access Node ID:</p>
    <input id="c1" placeholder="Enter ID...">
    <div style="margin-top:10px;">
      <button onclick="playClick(); check(1)">Confirm</button>
      <button onclick="playClick(); openPage('hub')">Back</button>
    </div>
    <p id="r1"></p>
</div>

<div id="case2" class="page">
    <h2>Case 2</h2>
    <p>Cypher Access Node ID:</p>
    <input id="c2" placeholder="Enter ID...">
    <div style="margin-top:10px;">
      <button onclick="playClick(); check(2)">Confirm</button>
      <button onclick="playClick(); openPage('hub')">Back</button>
    </div>
    <p id="r2"></p>
</div>

<div id="case3" class="page">
    <h2>Case 3</h2>
    <p>Cypher Access Node ID:</p>
    <input id="c3" placeholder="Enter ID...">
    <div style="margin-top:10px;">
      <button onclick="playClick(); check(3)">Confirm</button>
      <button onclick="playClick(); openPage('hub')">Back</button>
    </div>
    <p id="r3"></p>
</div>

<audio id="clickSound" src="sounds/click.mp3" preload="auto"></audio>

<script>
/* -----------------------------------------------------------
   ORIGINAL JS ‚Äî KH√îNG ƒê·ª§NG, GI·ªÆ NGUY√äN
----------------------------------------------------------- */
function playClick(){
    const s = document.getElementById('clickSound');
    if(!s) return;
    try{
        s.currentTime = 0;
        s.play();
    }catch(e){}
}
function closePage(){
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    document.getElementById("overlay").classList.remove("active");
    document.getElementById('home').setAttribute('aria-hidden','false');
}
function openPage(id){
    document.getElementById("overlay").classList.add("active");
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    const target = document.getElementById(id);
    target.classList.add("active");
    document.getElementById('home').setAttribute('aria-hidden','true');
    target.setAttribute('aria-hidden','false');
    const input = target.querySelector('input');
    if(input) setTimeout(()=> input.focus(), 250);
}
const codes = {
    C: "C40SS",
    O: "ORT15",
    D: "DJR04",
    E: "END12"
};
function detectCode(val){
    if(val === codes.C) return "C";
    if(val === codes.O) return "O";
    if(val === codes.D) return "D";
    if(val === codes.E) return "E";
    return null;
}
function check(n){
    const inp = document.getElementById('c'+n);
    const val = inp.value.trim();
    const out = document.getElementById('r'+n);

    if(!val){
        out.innerText = "No ID entered.";
        out.style.color = "#ff4d4d";
        return;
    }

    const key = detectCode(val);

    if(!key){
        out.innerText = "Error";
        out.style.color = "#ff4d4d";
        inp.style.border = "2px solid #ff4d4d";
        inp.style.boxShadow = "0 0 12px #ff4d4d55 inset";
        inp.classList.add('shake');
        setTimeout(()=>{
            inp.classList.remove('shake');
            inp.style.border = "";
            inp.style.boxShadow = "";
        }, 400);
        return;
    }

    out.innerText = "Access successfully";
    out.style.color = "#4dff88";
    inp.style.border = "2px solid #4dff88";
    inp.style.boxShadow = "0 0 12px #4dff8855 inset";

    setTimeout(()=>{
        window.location.href = `case${n}_${key}.html`;
    }, 600);
}
const shakeStyle = document.createElement('style');
shakeStyle.innerHTML = `
@keyframes shake {
    0%{transform:translateX(0)}
    25%{transform:translateX(-6px)}
    50%{transform:translateX(6px)}
    75%{transform:translateX(-4px)}
    100%{transform:translateX(0)}
}
.shake { animation: shake .32s linear; }
`;
document.head.appendChild(shakeStyle);

/* -----------------------------------------------------------
   ADDED EFFECT SCRIPTS
----------------------------------------------------------- */

/* === SYMBOL RAIN === */
const symCanvas = document.getElementById("symbolsCanvas");
const symCtx = symCanvas.getContext("2d");
let w, h, cols, chars, drops;

function initMatrix(){
    w = symCanvas.width = window.innerWidth;
    h = symCanvas.height = window.innerHeight;
    cols = Math.floor(w / 20);
    chars = "01<>/\\|{}[]¬£$¬•?=+-".split("");
    drops = Array(cols).fill(1);
}
function drawMatrix(){
    symCtx.fillStyle = "rgba(0,0,0,0.06)";
    symCtx.fillRect(0,0,w,h);
    symCtx.fillStyle = "rgba(0,255,255,0.3)";
    symCtx.font = "16px monospace";
    drops.forEach((y, i)=>{
        const text = chars[Math.floor(Math.random()*chars.length)];
        symCtx.fillText(text, i*20, y*20);
        if(y*20 > h && Math.random() > 0.975) drops[i] = 0;
        drops[i]++;
    });
}
initMatrix();
setInterval(drawMatrix, 50);
window.addEventListener("resize", initMatrix);

/* === AMBIENT PARTICLES === */
const pCanvas = document.getElementById("ambientCanvas");
const pCtx = pCanvas.getContext("2d");
let pw, ph, particles=[];
function initParticles(){
    pw = pCanvas.width = window.innerWidth;
    ph = pCanvas.height = window.innerHeight;
    particles = Array.from({length:80}).map(()=>({
        x: Math.random()*pw,
        y: Math.random()*ph,
        r: Math.random()*3+1,
        dx: (Math.random()*1-0.5)*0.4,
        dy: (Math.random()*1-0.5)*0.4
    }));
}
function drawParticles(){
    pCtx.clearRect(0,0,pw,ph);
    particles.forEach(p=>{
        pCtx.beginPath();
        pCtx.arc(p.x,p.y,p.r,0,Math.PI*2);
        pCtx.fillStyle="rgba(0,255,255,0.35)";
        pCtx.fill();
        p.x+=p.dx; p.y+=p.dy;
        if(p.x<0) p.x=pw;
        if(p.x>pw) p.x=0;
        if(p.y<0) p.y=ph;
        if(p.y>ph) p.y=0;
    });
    requestAnimationFrame(drawParticles);
}
initParticles();
drawParticles();
window.addEventListener("resize", initParticles);
</script>

</body>
</html>
